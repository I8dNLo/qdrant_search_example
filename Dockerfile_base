FROM cnstark/pytorch:2.0.1-py3.10.11-ubuntu22.04

COPY . /app
WORKDIR /app
RUN apt update
RUN apt install unzip
RUN pip install -r requirements.txt

# Download data
ADD https://storage.googleapis.com/ads-dataset/subfolder-0.zip ./
ADD https://storage.googleapis.com/ads-dataset/subfolder-1.zip ./

RUN mkdir -p /app/data/0 && \
    mkdir -p /app/data/1 && \
    unzip -q subfolder-0.zip -d /app/data/ && \
    unzip -q subfolder-1.zip -d /app/data/ && \
    rm subfolder-0.zip subfolder-1.zip
